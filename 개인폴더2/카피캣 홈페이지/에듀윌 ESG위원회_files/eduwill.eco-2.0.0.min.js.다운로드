var eduwill;function stageModeInit(){stageModeInitStep1(),setTimeout("stageModeInitStep2()",0),setTimeout("stageModeInitStep2()",100),setTimeout("stageModeInitStep2()",500),setTimeout("stageModeInitStep2()",1e3),setTimeout("stageModeInitStep2()",3e3)}function stageModeInitStep1(){$("["+eduwill.eco.EcoContentHandler.ECO_INDENTITY_ATTR+"]").append('<div class="dim"><span></span><div style="position:absolute; top:10px; right:10px;"><a href="#" onclick="$(this).parent().parent().remove(); return false;" style="font-size:12px; color:#fff; font-weight:bold;">닫기</a></div></div>'),$("["+eduwill.eco.EcoContentHandler.ECO_INDENTITY_ATTR+"]").wrapInner('<div class="innerWrap"></div>'),$("div[class=innerWrap]").on("mouseover",function(){$(this).addClass("hover").siblings("div[class=innerWrap]").removeClass("hover"),$(this).find(".dim").show()}).mouseout(function(){$(this).find(".dim").hide()})}function stageModeInitStep2(){$("["+eduwill.eco.EcoContentHandler.ECO_INDENTITY_ATTR+"]").each(function(e){$(this).find(" .innerWrap").height(),$(this).find(".dim").find("span").text($(this).attr(eduwill.eco.EcoContentHandler.ECO_INDENTITY_ATTR))})}function getEcoDynamicContent(e,t){"undefined"!=typeof $&&(new eduwill.eco.EcoContentHandler).get(e,t)}if(function(e){!function(t){var o=function(){function t(e){this.className="",this.className=this.getFunctionName(e)}return t.prototype.getFunctionName=function(e){var t=/function (.{1,})\(/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""},t.prototype.setLoggerLevel=function(t){e.eco.Logger.loggerLevel=t},t.prototype.debug=function(e){this.print(t.LOGGER_LEVEL_DEBUG,t.LOGGER_LEVEL_DEBUG_TITLE,e)},t.prototype.info=function(e){this.print(t.LOGGER_LEVEL_DEBUG,t.LOGGER_LEVEL_INFO_TITLE,e)},t.prototype.warning=function(e){this.print(t.LOGGER_LEVEL_DEBUG,t.LOGGER_LEVEL_WARNING_TITLE,e)},t.prototype.error=function(e){this.print(t.LOGGER_LEVEL_DEBUG,t.LOGGER_LEVEL_ERROR_TITLE,"["+e.code+"]"+e.name+" "+e.message)},t.prototype.print=function(t,o,n){if(t>=e.eco.Logger.loggerLevel){var i=new Date,c="["+o+"] ["+(i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds())+"] ";c+="CLASS:["+this.className+"] > ",c+=n;try{console.log(c)}catch(e){}}},t}();o.LOGGER_LEVEL_DEBUG=1e3,o.LOGGER_LEVEL_INFO=2e3,o.LOGGER_LEVEL_WARNING=3e3,o.LOGGER_LEVEL_ERROR=4e3,o.LOGGER_LEVEL_DEBUG_TITLE="DEBUG",o.LOGGER_LEVEL_INFO_TITLE="INFO",o.LOGGER_LEVEL_WARNING_TITLE="WARNING",o.LOGGER_LEVEL_ERROR_TITLE="ERROR",o.loggerLevel=o.LOGGER_LEVEL_ERROR,t.Logger=o;var n=function(){function t(){this.logger=new e.eco.Logger(this)}return t.prototype.postAjax=function(e,t,o,n){$.ajax({type:"GET",async:!0,url:e,crossDomain:!0,dataType:"json",timeout:5e3,cache:!1,data:t,success:function(e){"function"!=typeof o&&"object"!=typeof o||o(e)},error:function(e){"function"!=typeof n&&"object"!=typeof o||n(e)}})},t.prototype.xDomainRequest=function(e,t,o,n){var i=new XDomainRequest;i.open("get",e),i.onprogress=function(){},i.ontimeout=function(){},i.onerror=function(){},i.onload=function(){jsonData=JSON.parse(i.responseText),o(jsonData)},setTimeout(function(){i.send()},0)},t}();t.Ajax=n;var i=function(){function t(){this.logger=new e.eco.Logger(this),this.ajax=new e.eco.Ajax,this.contentApi="//eco.eduwill.net/api/contents/"+e.eco.EcoContentHandler.ECO_VERSION+"/"}return t.prototype.getEcoMode=function(){return t.ECO_MODE},t.prototype.setEcoMode=function(e){t.ECO_MODE=e},t.prototype.setLogLevel=function(e){this.logger.setLoggerLevel(e)},t.prototype.ecoModeInit=function(){var t=document.location.href;if(t.indexOf(e.eco.EcoContentHandler.ECO_MODE_PARAM_NAME)>-1)if(t.indexOf("?")>-1){var o=t.split("?")[1];if(o.indexOf("&")>-1)for(var n,i,c=o.split("&"),s=0;s<c.length;s++)n=c[s].split("=")[0],i=c[s].split("=")[1],n==e.eco.EcoContentHandler.ECO_MODE_PARAM_NAME&&(this.setEcoMode(i),this.logger.debug("Multi parameter - ECO MODE ["+this.getEcoMode()+"]"));else o.split("=")[0]==e.eco.EcoContentHandler.ECO_MODE_PARAM_NAME&&(this.setEcoMode(o.split("=")[1]),this.logger.debug("Single parameter - ECO MODE ["+this.getEcoMode()+"]"))}else this.logger.debug("parameter is null");else this.logger.debug("EcoMode 데이터가 존재하지 않습니다.");this.logger.debug("ECO MODE : "+this.getEcoMode())},t.prototype.run=function(){if(this.logger.debug("S:Process"),this.ecoModeInit(),$("["+e.eco.EcoContentHandler.ECO_INDENTITY_ATTR+"]")){var t,o="";if($("["+e.eco.EcoContentHandler.ECO_INDENTITY_ATTR+"]").each(function(n){""!=(t=$(this).attr(e.eco.EcoContentHandler.ECO_INDENTITY_ATTR))&&(o+=""==o?t:","+t)}),this.logger.debug("content_id_array - "+o),void 0!=o&&""!=o){var n={ecoMode:this.getEcoMode()};this.logger.debug("ajax begin..."),window.XDomainRequest?this.ajax.xDomainRequest(this.contentApi+o,n,this.successCallback,this.failCallback):this.ajax.postAjax(this.contentApi+o,n,this.successCallback,this.failCallback),this.logger.debug("ajax complete!")}else this.logger.debug("ECO eco_code is null!")}else this.logger.debug("ECO Object is nothing!");this.logger.debug("E:Process")},t.prototype.get=function(t,o){if(this.logger.debug("S:Process"),this.ecoModeInit(),""!=t&&""!=o){if($("#"+o)){var n={ecoMode:this.getEcoMode()};this.ajax.postAjax(this.contentApi+t,n,function(t){var n=new e.eco.Logger(this);n.debug("S:successCallback");var i=t.data;n.debug("contentsData : "+i);var c=i.length;if(n.debug("contentsCount - "+c),c>0){for(var s=void 0,a=void 0,r=void 0,l=0;l<c;l++)if(void 0!=(r=i[l])&&null!=r)if(n.debug("contentData - "+r),s=void 0==r.content_id?"":r.content_id,a=void 0==r.template?"":r.template,n.debug("content_id - "+s),n.debug("template - "+a),0!=s&&""!=a)try{var d='<iframe src="//img.eduwill.net/resources/eco/eco_log_collect.html?contentId='+s+'" width="0" height="0" frameborder="0" style="width:0px;height:0px;display:block;">';$("#"+o).html(a),$("#"+o).append(d)}catch(e){n.error(e)}else n.debug("content_id, tempate is null!");else n.debug("contentData is null!");var E=new e.eco.EcoContentHandler;"S"!=E.getEcoMode()&&"D"!=E.getEcoMode()||stageModeInit()}n.debug("E:successCallback")},this.failCallback)}else this.logger.debug("ECO Object is nothing!");this.logger.debug("E:Process")}},t.prototype.successCallback=function(t){var o=new e.eco.Logger(this);o.debug("S:successCallback");var n=t.data,i=n.length;if(o.debug("contentsCount - "+i),i>0){for(var c=void 0,s=void 0,a=void 0,r=0;r<i;r++)if(void 0!=(a=n[r])&&null!=a)if(o.debug("contentData - "+a),c=void 0==a.content_id?"":a.content_id,s=void 0==a.template?"":a.template,o.debug("content_id - "+c),o.debug("template - "+s),0!=c&&""!=s)try{var l='<iframe src="//img.eduwill.net/resources/eco/eco_log_collect.html?contentId='+c+'" width="0" height="0" frameborder="0" style="width:0px;height:0px;display: block;">';$("["+e.eco.EcoContentHandler.ECO_INDENTITY_ATTR+"="+c+"]").append(s),$("["+e.eco.EcoContentHandler.ECO_INDENTITY_ATTR+"="+c+"]").append(l)}catch(e){o.error(e)}else o.debug("content_id, tempate is null!");else o.debug("contentData is null!");var d=new e.eco.EcoContentHandler;"S"!=d.getEcoMode()&&"D"!=d.getEcoMode()||stageModeInit()}o.debug("E:successCallback")},t.prototype.failCallback=function(t){new e.eco.Logger(this).error(t)},t}();i.ECO_VERSION="v2",i.ECO_INDENTITY_ATTR="data-eduwill-eco-content",i.ECO_MODE_PARAM_NAME="ECO_MODE",i.ECO_MODE="L",t.EcoContentHandler=i}(e.eco||(e.eco={}))}(eduwill||(eduwill={})),void 0===window.ecoRunYn&&"undefined"!=typeof $){var ecoContentHandler=new eduwill.eco.EcoContentHandler;ecoContentHandler.run(),window.ecoRunYn="Y"}